(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6e8400de"],{"1d0f":function(e,t,r){},"25f0":function(e,t,r){"use strict";var n=r("6eeb"),a=r("825a"),c=r("d039"),i=r("ad6d"),s="toString",o=RegExp.prototype,u=o[s],l=c((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),h=u.name!=s;(l||h)&&n(RegExp.prototype,s,(function(){var e=a(this),t=String(e.source),r=e.flags,n=String(void 0===r&&e instanceof RegExp&&!("flags"in o)?i.call(e):r);return"/"+t+"/"+n}),{unsafe:!0})},2909:function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e){if(Array.isArray(e))return n(e)}r.d(t,"a",(function(){return o}));r("a4d3"),r("e01a"),r("d28b"),r("a630"),r("d3b7"),r("3ca3"),r("ddb0");function c(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}r("fb6a"),r("b0c0"),r("25f0");function i(e,t){if(e){if("string"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e){return a(e)||c(e)||i(e)||s()}},"4a7c":function(e,t,r){},"4d63":function(e,t,r){var n=r("83ab"),a=r("da84"),c=r("94ca"),i=r("7156"),s=r("9bf2").f,o=r("241c").f,u=r("44e7"),l=r("ad6d"),h=r("9f7f"),f=r("6eeb"),d=r("d039"),p=r("69f3").set,g=r("2626"),v=r("b622"),b=v("match"),m=a.RegExp,S=m.prototype,x=/a/g,y=/a/g,w=new m(x)!==x,O=h.UNSUPPORTED_Y,T=n&&c("RegExp",!w||O||d((function(){return y[b]=!1,m(x)!=x||m(y)==y||"/a/i"!=m(x,"i")})));if(T){var R=function(e,t){var r,n=this instanceof R,a=u(e),c=void 0===t;if(!n&&a&&e.constructor===R&&c)return e;w?a&&!c&&(e=e.source):e instanceof R&&(c&&(t=l.call(e)),e=e.source),O&&(r=!!t&&t.indexOf("y")>-1,r&&(t=t.replace(/y/g,"")));var s=i(w?new m(e,t):m(e,t),n?this:S,R);return O&&r&&p(s,{sticky:r}),s},_=function(e){e in R||s(R,e,{configurable:!0,get:function(){return m[e]},set:function(t){m[e]=t}})},k=o(m),A=0;while(k.length>A)_(k[A++]);S.constructor=R,R.prototype=S,f(a,"RegExp",R)}g("RegExp")},"4df4":function(e,t,r){"use strict";var n=r("0366"),a=r("7b0b"),c=r("9bdd"),i=r("e95a"),s=r("50c4"),o=r("8418"),u=r("35a1");e.exports=function(e){var t,r,l,h,f,d,p=a(e),g="function"==typeof this?this:Array,v=arguments.length,b=v>1?arguments[1]:void 0,m=void 0!==b,S=u(p),x=0;if(m&&(b=n(b,v>2?arguments[2]:void 0,2)),void 0==S||g==Array&&i(S))for(t=s(p.length),r=new g(t);t>x;x++)d=m?b(p[x],x):p[x],o(r,x,d);else for(h=S.call(p),f=h.next,r=new g;!(l=f.call(h)).done;x++)d=m?c(h,b,[l.value,x],!0):l.value,o(r,x,d);return r.length=x,r}},"6cbe":function(e,t,r){"use strict";r("4a7c")},7156:function(e,t,r){var n=r("861d"),a=r("d2bb");e.exports=function(e,t,r){var c,i;return a&&"function"==typeof(c=t.constructor)&&c!==r&&n(i=c.prototype)&&i!==r.prototype&&a(e,i),e}},"9bdd":function(e,t,r){var n=r("825a"),a=r("2a62");e.exports=function(e,t,r,c){try{return c?t(n(r)[0],r[1]):t(r)}catch(i){throw a(e),i}}},a5aa:function(e,t,r){"use strict";r("1d0f")},a630:function(e,t,r){var n=r("23e7"),a=r("4df4"),c=r("1c7e"),i=!c((function(e){Array.from(e)}));n({target:"Array",stat:!0,forced:i},{from:a})},b0c0:function(e,t,r){var n=r("83ab"),a=r("9bf2").f,c=Function.prototype,i=c.toString,s=/^\s*function ([^ (]*)/,o="name";n&&!(o in c)&&a(c,o,{configurable:!0,get:function(){try{return i.call(this).match(s)[1]}catch(e){return""}}})},efe3:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"search-container"},[r("form",{staticClass:"search-form",attrs:{action:"/"}},[r("van-search",{attrs:{"show-action":"",placeholder:"请输入搜索关键词",background:"#3296fa"},on:{search:e.onSearch,cancel:e.onCancel,focus:function(t){e.isResultShow=!1}},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}})],1),e.isResultShow?r("search-result",{attrs:{"search-text":e.searchText}}):e.searchText?r("search-suggestion",{attrs:{"search-text":e.searchText},on:{search:e.onSearch}}):r("search-history",{attrs:{"search-histories":e.searchHistories},on:{"clear-search-histories":function(t){e.searchHistories=[]},search:e.onSearch}})],1)},a=[],c=(r("c975"),r("a434"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"search-history"},[r("van-cell",{attrs:{title:"搜索历史"}},[e.isDeleteShow?r("div",[r("span",{on:{click:function(t){return e.$emit("clear-search-histories",[])}}},[e._v("全部删除")]),e._v(" "),r("span",{on:{click:function(t){e.isDeleteShow=!1}}},[e._v("完成")])]):r("van-icon",{attrs:{name:"delete"},on:{click:function(t){e.isDeleteShow=!0}}})],1),e._l(e.searchHistories,(function(t,n){return r("van-cell",{key:n,attrs:{title:t},on:{click:function(r){return e.onSearchItemClick(t,n)}}},[r("van-icon",{directives:[{name:"show",rawName:"v-show",value:e.isDeleteShow,expression:"isDeleteShow"}],attrs:{name:"close"}})],1)}))],2)}),i=[],s={name:"SearchHistory",props:{searchHistories:{type:Array,required:!0}},data:function(){return{isDeleteShow:!1}},methods:{onSearchItemClick:function(e,t){this.isDeleteShow?this.searchHistories.splice(t,1):this.$emit("search",e)}}},o=s,u=r("2877"),l=Object(u["a"])(o,c,i,!1,null,"2fdc0327",null),h=l.exports,f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"search-suggestion"},e._l(e.suggestions,(function(t,n){return r("van-cell",{key:n,attrs:{icon:"search"},on:{click:function(r){return e.$emit("search",t)}}},[r("div",{attrs:{slot:"title"},domProps:{innerHTML:e._s(e.highlight(t))},slot:"title"})])})),1)},d=[],p=(r("4d63"),r("ac1f"),r("25f0"),r("5319"),r("96cf"),r("1da1")),g=r("b775"),v=function(e){return Object(g["a"])({method:"GET",url:"/app/v1_0/suggestion",params:{q:e}})},b=function(e){return Object(g["a"])({method:"GET",url:"/app/v1_0/search",params:e})},m=r("60bb"),S={name:"SearchSuggestion",data:function(){return{suggestions:[]}},props:{searchText:{type:String,required:!0}},watch:{searchText:{handler:Object(m["debounce"])((function(e){this.loadSearchSuggestions(e)}),200),immediate:!0}},methods:{loadSearchSuggestions:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,v(e);case 3:n=r.sent,a=n.data,t.suggestions=a.data.options,r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),t.$toast("数据获取失败，请稍后重试");case 11:case"end":return r.stop()}}),r,null,[[0,8]])})))()},highlight:function(e){var t=new RegExp(this.searchText,"gi");return e.replace(t,'<span class="active">'.concat(this.searchText,"</span>"))}}},x=S,y=(r("6cbe"),Object(u["a"])(x,f,d,!1,null,"a5b50df2",null)),w=y.exports,O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"search-result"},[r("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了",error:e.error,"error-text":"加载失败，请点击重试"},on:{"update:error":function(t){e.error=t},load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.list,(function(e,t){return r("van-cell",{key:t,attrs:{title:e.title}})})),1)],1)},T=[],R=r("2909"),_={name:"SearchResult",props:{searchText:{type:String,required:!0}},data:function(){return{list:[],loading:!1,finished:!1,page:1,perPage:20,error:!1}},methods:{onLoad:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,n,a,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b({page:e.page,per_page:e.perPage,q:e.searchText});case 3:n=t.sent,a=n.data,Math.random()>.5&&JSON.parse("xxx"),c=a.data.results,(r=e.list).push.apply(r,Object(R["a"])(c)),e.loading=!1,c.length?e.page++:e.finished=!0,t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](0),e.error=!0,e.loading=!1;case 16:case"end":return t.stop()}}),t,null,[[0,12]])})))()}}},k=_,A=Object(u["a"])(k,O,T,!1,null,"2d49507a",null),E=A.exports,H=r("5d2d"),j={name:"SearchIndex",components:{SearchHistory:h,SearchSuggestion:w,SearchResult:E},data:function(){return{searchText:"",isResultShow:!1,searchHistories:Object(H["a"])("TOUTIAO_SEARCH_HISTORIES")||[]}},watch:{searchHistories:function(e){Object(H["b"])("TOUTIAO_SEARCH_HISTORIES",e)}},methods:{onSearch:function(e){this.searchText=e;var t=this.searchHistories.indexOf(e);-1!==t&&this.searchHistories.splice(t,1),this.searchHistories.unshift(e),this.isResultShow=!0},onCancel:function(){this.$router.back()}}},C=j,I=(r("a5aa"),Object(u["a"])(C,n,a,!1,null,"f52cbcb6",null));t["default"]=I.exports},fb6a:function(e,t,r){"use strict";var n=r("23e7"),a=r("861d"),c=r("e8b5"),i=r("23cb"),s=r("50c4"),o=r("fc6a"),u=r("8418"),l=r("b622"),h=r("1dde"),f=r("ae40"),d=h("slice"),p=f("slice",{ACCESSORS:!0,0:0,1:2}),g=l("species"),v=[].slice,b=Math.max;n({target:"Array",proto:!0,forced:!d||!p},{slice:function(e,t){var r,n,l,h=o(this),f=s(h.length),d=i(e,f),p=i(void 0===t?f:t,f);if(c(h)&&(r=h.constructor,"function"!=typeof r||r!==Array&&!c(r.prototype)?a(r)&&(r=r[g],null===r&&(r=void 0)):r=void 0,r===Array||void 0===r))return v.call(h,d,p);for(n=new(void 0===r?Array:r)(b(p-d,0)),l=0;d<p;d++,l++)d in h&&u(n,l,h[d]);return n.length=l,n}})}}]);
//# sourceMappingURL=chunk-6e8400de.09a60bad.js.map